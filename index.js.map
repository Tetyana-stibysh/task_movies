{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = 'f76345488f53f2b9e8869e03f28c0fec';\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst END_POINT = '/trending/movie/week';\nconst container = document.querySelector('.js-movie-list');\nconst guard = document.querySelector('.js-guard');\nlet page = 1;\nconst options = {\n  root: null,\n  rootMargin: '55px',\n  threshold: 0,\n};\nconst observer = new IntersectionObserver(handlerPagination, options);\nfunction handlerPagination(entries, observer) {\n  entries.forEach(async entry => {\n    if (entry.isIntersecting) {\n      page++;\n      try {\n        const data = await serviceMovie(page);\n\n        container.insertAdjacentHTML('beforeend', createMarkup(data.results));\n        if (data.page >= data.total_pages) {\n          observer.unobserve(entry.target);\n        }\n      } catch {\n        error => alert(error.message);\n      }\n      console.log('OOkk');\n    }\n  });\n}\n\nasync function serviceMovie(page = 1) {\n  const { data } = await axios(`${BASE_URL}${END_POINT}`, {\n    params: {\n      api_key: `${API_KEY}`,\n      page,\n    },\n  });\n\n  return data;\n}\nserviceMovie(page)\n  .then(data => {\n    container.insertAdjacentHTML('beforeend', createMarkup(data.results));\n    if (data.page < data.total_pages) {\n      observer.observe(guard);\n    }\n  })\n  .catch(error => alert(error.message));\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({ poster_path, release_date, original_title, vote_average }) =>\n        `<li class=\"movie-card\">\n      <img src=\"https://image.tmdb.org/t/p/w300${poster_path}\" alt=\"${original_title}\">\n      <div class=\"movie-info\">\n      <h2>${original_title}</h2>\n      <p>Release date: ${release_date}</p>\n      <p>Vote average: ${vote_average}</p></div></li>`\n    )\n    .join('');\n}\n\n// var callback = function (entries, observer) {\n//   /* Content excerpted, show below */\n// };\n\n//----------------------------------------------------\n// const loadMore = document.querySelector('.js-load-more');\n// let page = 1;\n// loadMore.addEventListener('click', onLoadMore);\n// async function onLoadMore() {\n//   page++;\n//   loadMore.disabled = true;\n//   try {\n//     const data = await serviceMovie(page);\n//     if (data.page >= data.total_pages) {\n//       loadMore.classList.replace('load-more', 'load-more-hidden');\n//     }\n//     console.log(data);\n\n//     container.insertAdjacentHTML('beforeend', createMarkup(data.results));\n//   } catch {\n//     error => alert(error.message);\n//   } finally {\n//     loadMore.disabled = false;\n//   }\n// }\n// async function serviceMovie(page = 1) {\n//   const { data } = await axios(`${BASE_URL}${END_POINT}`, {\n//     params: {\n//       api_key: `${API_KEY}`,\n//       page,\n//     },\n//   });\n\n//   return data;\n// }\n// serviceMovie(page)\n//   .then(data => {\n//     container.insertAdjacentHTML('beforeend', createMarkup(data.results));\n//     if (data.page < data.total_pages) {\n//       loadMore.classList.replace('load-more-hidden', 'load-more');\n//     }\n//     console.log(data);\n//   })\n//   .catch(error => alert(error.message));\n\n// function createMarkup(arr) {\n//   return arr\n//     .map(\n//       ({ poster_path, release_date, original_title, vote_average }) =>\n//         `<li class=\"movie-card\">\n//       <img src=\"https://image.tmdb.org/t/p/w300${poster_path}\" alt=\"${original_title}\">\n//       <div class=\"movie-info\">\n//       <h2>${original_title}</h2>\n//       <p>Release date: ${release_date}</p>\n//       <p>Vote average: ${vote_average}</p></div></li>`\n//     )\n//     .join('');\n// }\n"],"names":["API_KEY","BASE_URL","END_POINT","container","guard","page","options","observer","handlerPagination","entries","entry","data","serviceMovie","createMarkup","axios","error","arr","poster_path","release_date","original_title","vote_average"],"mappings":"svBAEA,MAAMA,EAAU,mCACVC,EAAW,+BACXC,EAAY,uBACZC,EAAY,SAAS,cAAc,gBAAgB,EACnDC,EAAQ,SAAS,cAAc,WAAW,EAChD,IAAIC,EAAO,EACX,MAAMC,EAAU,CACd,KAAM,KACN,WAAY,OACZ,UAAW,CACb,EACMC,EAAW,IAAI,qBAAqBC,EAAmBF,CAAO,EACpE,SAASE,EAAkBC,EAASF,EAAU,CAC5CE,EAAQ,QAAQ,MAAMC,GAAS,CAC7B,GAAIA,EAAM,eAAgB,CACxBL,IACA,GAAI,CACF,MAAMM,EAAO,MAAMC,EAAaP,CAAI,EAEpCF,EAAU,mBAAmB,YAAaU,EAAaF,EAAK,OAAO,CAAC,EAChEA,EAAK,MAAQA,EAAK,aACpBJ,EAAS,UAAUG,EAAM,MAAM,CAEzC,MAAc,CAEP,CACD,QAAQ,IAAI,MAAM,CACnB,CACL,CAAG,CACH,CAEA,eAAeE,EAAaP,EAAO,EAAG,CACpC,KAAM,CAAE,KAAAM,CAAM,EAAG,MAAMG,EAAM,GAAGb,CAAQ,GAAGC,CAAS,GAAI,CACtD,OAAQ,CACN,QAAS,GAAGF,CAAO,GACnB,KAAAK,CACD,CACL,CAAG,EAED,OAAOM,CACT,CACAC,EAAaP,CAAI,EACd,KAAKM,GAAQ,CACZR,EAAU,mBAAmB,YAAaU,EAAaF,EAAK,OAAO,CAAC,EAChEA,EAAK,KAAOA,EAAK,aACnBJ,EAAS,QAAQH,CAAK,CAE5B,CAAG,EACA,MAAMW,GAAS,MAAMA,EAAM,OAAO,CAAC,EACtC,SAASF,EAAaG,EAAK,CACzB,OAAOA,EACJ,IACC,CAAC,CAAE,YAAAC,EAAa,aAAAC,EAAc,eAAAC,EAAgB,aAAAC,CAAc,IAC1D;AAAA,iDACyCH,CAAW,UAAUE,CAAc;AAAA;AAAA,YAExEA,CAAc;AAAA,yBACDD,CAAY;AAAA,yBACZE,CAAY,iBAChC,EACA,KAAK,EAAE,CACZ"}